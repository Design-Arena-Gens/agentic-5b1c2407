function toRadians(deg: number): number {
  return (deg * Math.PI) / 180;
}

function haversineDistanceKm(a: { lat: number; lon: number }, b: { lat: number; lon: number }): number {
  const R = 6371; // Earth's mean radius in km
  const dLat = toRadians(b.lat - a.lat);
  const dLon = toRadians(b.lon - a.lon);
  const lat1 = toRadians(a.lat);
  const lat2 = toRadians(b.lat);
  const h = Math.sin(dLat / 2) ** 2 + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon / 2) ** 2;
  const c = 2 * Math.asin(Math.sqrt(h));
  return R * c;
}

const DELHI = { lat: 28.6139, lon: 77.2090 };
const PATNA = { lat: 25.5941, lon: 85.1376 };

export default function Page() {
  const airKmRaw = haversineDistanceKm(DELHI, PATNA);
  const airKm = Math.round(airKmRaw);

  // Typical rail/road is longer than straight-line; use a factor and round to 5 km.
  const roadEstimate = Math.round((airKmRaw * 1.25) / 5) * 5; // ~+25% approximation
  const railEstimate = roadEstimate; // use same broad estimate here

  return (
    <main className="container">
      <section className="card">
        <h1>?????? ?? ???? ????? ??? ???</h1>
        <p className="lead">
          ?? ?????? ?????? ?? ???? ????? ??? ?????? ?? ??? ??? ?????? ??? ???? ??? ??? ??? ???:
          ?????, ?????? ?? ????? ???????? ??? ????
        </p>

        <div className="grid">
          <article className="box">
            <h2>???? (???? ????) ????</h2>
            <p className="value">???? <strong>{airKm}</strong> ????</p>
            <p className="note">???? ????????? ????? ??, ?????????? ???????</p>
          </article>

          <article className="box">
            <h2>???/???? ?? ???????? ????</h2>
            <p className="value">???? <strong>{railEstimate}</strong>?<strong>{roadEstimate}</strong> ????</p>
            <p className="note">???????? ?????, ???? ? ??????? ?? ???? ???? ????? ???</p>
          </article>
        </div>

        <details className="details">
          <summary>?????</summary>
          <ul>
            <li>??????: 28.6139? N, 77.2090? E</li>
            <li>????: 25.5941? N, 85.1376? E</li>
            <li>????????? ???? ??????? ?????? ????? ?????? ???? ???</li>
          </ul>
        </details>

        <footer className="footer">?? ?????? ????????? ??; ???????? ???? ????? ?? ?????? ??????</footer>
      </section>
    </main>
  );
}
